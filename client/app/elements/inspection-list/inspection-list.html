<dom-module id="inspection-list">
  <template>
    <iron-list id="list" items="[[data]]" as="item" scrollTarget="{{scrollTarget}}">
      <template>
        <a href="{{_inspectionUrl(item)}}" style="text-decoration: none; color: inherit;">
          <inspection-list-item>
            <span class="day">{{_dayFromTimestamp(item.inspected_at)}}</span>
            <span class="month">{{_monthFromTimestamp(item.inspected_at)}}</span>
            <span class="notes">{{item.notes}}</span>
            <span class="beekeeper">{{item.last_edit}}</span>
          </inspection-list-item>
        </a>
      </template>
    </iron-list>

    <!-- <iron-ajax -->
    <!--   id="client" -->
    <!--   method="get" -->
    <!--   on-response="handleResponse" -->
    <!--   on-error="handleError"></iron-ajax> -->
  </template>
</dom-module>

<script>
  (function () {
    Polymer({
      is: 'inspection-list',
      behaviors: [HivelifeBehaviors.TimeBehavior],

      properties: {
        hiveId: Number,
        authenticationToken: String,
        scrollTarget: Object
      },

      ready: function () {
        this.data = [];
      },

      loadData: function () {
        /* var client = this.$.client; */

        /* client.url = 'v1/api/hives/' + this.hiveId + '/inspections'; */
        /* client.contentType = 'application/json'; */
        /* client.headers = { */
        /*   'Authorization': 'Token token=' + this.authenticationToken, */
        /*   'Accept': 'application/json' */
        /* }; */
        client.generateRequest();
      },

      handleResponse: function (event) {
        this.data = event.detail.response;
      },

      handleError: function (event) {
        console.log(event.detail);
      },

      _inspectionUrl: function (item) {
        return 'hives/' + this.hiveId + '/inspections/' + item.id;
      }
    });
  })();
</script>
